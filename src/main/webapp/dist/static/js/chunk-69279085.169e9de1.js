(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69279085"],{"0a49":function(e,t,o){var r=o("9b43"),a=o("626a"),n=o("4bf8"),s=o("9def"),i=o("cd1c");e.exports=function(e,t){var o=1==e,l=2==e,u=3==e,c=4==e,p=6==e,h=5==e||p,g=t||i;return function(t,i,d){for(var f,m,v=n(t),y=a(v),b=r(i,d,3),C=s(y.length),w=0,_=o?g(t,C):l?g(t,0):void 0;C>w;w++)if((h||w in y)&&(f=y[w],m=b(f,w,v),e))if(o)_[w]=m;else if(m)switch(e){case 3:return!0;case 5:return f;case 6:return w;case 2:_.push(f)}else if(c)return!1;return p?-1:u||c?c:_}}},1169:function(e,t,o){var r=o("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},2174:function(e,t,o){},3780:function(e,t,o){},"60f8":function(e,t,o){"use strict";o("3780")},"6b23":function(e,t,o){"use strict";o("2174")},7514:function(e,t,o){"use strict";var r=o("5ca1"),a=o("0a49")(5),n="find",s=!0;n in[]&&Array(1)[n]((function(){s=!1})),r(r.P+r.F*s,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("9c6c")(n)},cd1c:function(e,t,o){var r=o("e853");e.exports=function(e,t){return new(r(e))(t)}},e853:function(e,t,o){var r=o("d3f4"),a=o("1169"),n=o("2b4c")("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},f4ba:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",{staticClass:"title"},[e._v("类别内容列表")]),e._v(" "),o("div",{staticClass:"add-button"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加内容")])],1),e._v(" "),o("div",{staticClass:"table-container"},[o("el-table",{attrs:{data:e.shopCategoryList,border:""}},[o("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),e._v(" "),e._e(),e._v(" "),o("el-table-column",{attrs:{label:"类别名称",prop:"shopCategoryName"}}),e._v(" "),o("el-table-column",{attrs:{label:"类别描述",prop:"shopCategoryDesc"}}),e._v(" "),o("el-table-column",{attrs:{label:"上级类别"},scopedSlots:e._u([{key:"default",fn:function(t){return null!=t.row.parent?[e._v("\n          "+e._s(t.row.parent.shopCategoryName)+"\n        ")]:void 0}}],null,!0)}),e._v(" "),o("el-table-column",{attrs:{label:"类别图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("img",{attrs:{src:e.row.shopCategoryImg}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"优先级",prop:"priority",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{label:"发布时间",prop:"createTime",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getDate(t.row.createTime))+"\n        ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"修改时间",prop:"lastEditTime",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getDate(t.row.lastEditTime))+"\n        ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{on:{click:function(o){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(o){return e.handleDelete(t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.dialogTitle,width:"800px",visible:e.showDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showDialog=t},close:e.resetForm}},[o("el-form",{ref:"form",attrs:{model:e.temp,"label-width":"90px",rules:e.rules,"hide-required-asterisk":""}},[o("el-form-item",{attrs:{label:"类别名称",prop:"shopCategoryName"}},[o("el-col",{attrs:{span:11}},[o("el-input",{model:{value:e.temp.shopCategoryName,callback:function(t){e.$set(e.temp,"shopCategoryName",t)},expression:"temp.shopCategoryName"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"类别描述",prop:"shopCategoryDesc"}},[o("el-col",{attrs:{span:11}},[o("el-input",{model:{value:e.temp.shopCategoryDesc,callback:function(t){e.$set(e.temp,"shopCategoryDesc",t)},expression:"temp.shopCategoryDesc"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"上级类别"}},[o("el-select",{attrs:{placeholder:"请选择",prop:"parentShopCategoryId"},on:{change:e.selectChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),o("el-form-item",{ref:"uploadElement",attrs:{label:"类别图片",prop:"shopCategoryImage"}},[o("el-upload",{ref:"upload",attrs:{action:"#","list-type":"picture-card","before-upload":e.beforeUpload,"on-remove":e.handleRemove,"auto-upload":!1,multiple:!1,"on-change":e.handleChange}},[o("i",{staticClass:"el-icon-plus"}),e._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n            只能上传jpg/png文件，且不超过500kb\n          ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[o("el-col",{attrs:{span:11}},[o("el-input",{attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"请输入数字，最多5位",maxlength:"5"},model:{value:e.temp.priority,callback:function(t){e.$set(e.temp,"priority",t)},expression:"temp.priority"}})],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){"添加内容"===e.dialogTitle?e.confirmAdd():e.confirmEdit()}}},[e._v("保 存")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.showDeleteDialog,width:"400px"},on:{"update:visible":function(t){e.showDeleteDialog=t}}},[o("span",[e._v("确认删除内容?此操作不可撤销,请谨慎操作")]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.showDeleteDialog=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:e.confirmDelete}},[e._v("删 除")])],1)])],1)},a=[],n=(o("7514"),o("96cf"),o("1da1")),s={data:function(){return{shopCategoryList:[],dialogTitle:"",showDialog:!1,temp:{parent:{shopCategoryId:""},shopCategoryId:null,shopCategoryName:null,shopCategoryDesc:null,priority:null},fileList:[],isType:0,isExit:!1,param:"",options:[{value:"1",label:"二手市场"},{value:"2",label:"美容美发"},{value:"3",label:"美食饮品"},{value:"4",label:"休闲娱乐"},{value:"5",label:"培训教育"},{value:"6",label:"租赁市场"},{value:null,label:"一级列表"}],value:"一级列表",rules:{shopCategoryName:[{required:!0,message:"类别名称不能为空",trigger:"blur"}],shopCategoryDesc:[{required:!0,message:"类别描述不能为空",trigger:"blur"}],shopCategoryImage:[{required:!0,message:"类别图片不能为空",trigger:"change"}],priority:[{required:!0,message:"优先级不能为空",trigger:"blur"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}],lastEditTime:[{required:!0,message:"修改时间不能为空",trigger:"blur"}]},showDeleteDialog:!1}},created:function(){this.getShopCategoryList()},methods:{getShopCategoryList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.shopCategoryData=this.req({url:"superadmin/listshopcategorys",method:"POST"}).then((function(e){t.shopCategoryList=e.rows,console.log(t.shopCategoryList)}),(function(e){console.log("err: ",e),t.$message.success(e)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDate:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},selectChange:function(e){this.temp.parent.shopCategoryId=e,console.log(this.temp.parent),console.log("e",e)},handleAdd:function(){this.dialogTitle="添加内容",this.showDialog=!0,console.log(this.isType)},handleEdit:function(e){var t=this;this.dialogTitle="编辑内容",this.showDialog=!0,this.isType=1,console.log(this.isType),this.$nextTick((function(){t.temp.shopCategoryId=e.shopCategoryId,t.temp.shopCategoryName=e.shopCategoryName,t.temp.shopCategoryDesc=e.shopCategoryDesc;var o=t.options.find((function(t){return t.value==e.parent.shopCategoryId}));t.value=o.label,t.temp.enableStatus=e.enableStatus,t.temp.priority=e.priority}))},handleDelete:function(e){this.showDeleteDialog=!0,this.temp.shopCategoryId=e.shopCategoryId},handleChange:function(e){e&&(this.isExit=!0,console.log("change"),this.$refs.uploadElement.clearValidate())},beforeUpload:function(e){return this.param=new FormData,0==this.isType?(this.param.append("shopCategoryManagementAdd_shopCategoryImg",e),console.log("0")):(this.param.append("shopCategoryManagementEdit_shopCategoryImg",e),console.log("1")),!1},confirmAdd:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isExit?(console.log("image",this.isExit),this.rules.shopCategoryImage[0].validator=function(e,o,r){r(),t.$refs.upload.submit()}):this.rules.shopCategoryImage[0].validator=function(e,t,o){o(e,t)},console.log("temp",JSON.stringify(this.temp)),this.$refs.form.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o&&(t.param.append("shopCategoryStr",JSON.stringify(t.temp)),t.req({url:"superadmin/addshopcategory",data:t.param,method:"POST"}).then((function(e){t.getShopCategoryList(),t.$message.success("添加成功")}),(function(e){console.log("err: ",e)})),t.showDialog=!1,t.$refs.form.resetFields());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),confirmEdit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.rules.shopCategoryImage[0].validator=function(e,t,o){o()},console.log(this.isExit),this.$refs.form.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(o){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new FormData,o&&(t.isExit?(t.$refs.upload.submit(),t.param.append("shopCategoryStr",JSON.stringify(t.temp))):(r.append("shopCategoryManagementEdit_shopCategoryImg",""),r.append("shopCategoryStr",JSON.stringify(t.temp)),t.param=r),t.req({url:"superadmin/modifyshopcategory",data:t.param,method:"POST"}).then((function(e){t.getShopCategoryList(),t.$message.success("修改成功")}),(function(e){console.log("err: ",e)})),t.showDialog=!1,t.$refs.form.resetFields());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),confirmDelete:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.req({url:"superadmin/removeshopcategory?shopCategoryId="+this.temp.shopCategoryId,data:this.param,method:"POST"}).then((function(e){t.showDeleteDialog=!1,t.getShopCategoryList(),t.$message.success("删除成功")}),(function(e){console.log("err: ",e)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleRemove:function(e,t){console.log(e,t),this.isExit=!1,console.log("remove",this.isExit)},resetForm:function(){this.$refs.form.resetFields(),this.isType=0}}},i=s,l=(o("60f8"),o("6b23"),o("2877")),u=Object(l["a"])(i,r,a,!1,null,"7fda5324",null);t["default"]=u.exports}}]);